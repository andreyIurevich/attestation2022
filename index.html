<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attestation</title>
  <script src="https://kit.fontawesome.com/be939dfb1b.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/shades-of-purple.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
  <script src="index.js"></script>
  <script src="promise.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <style>
    .container {
        display: flex;
        flex-direction: column;
        width: 600px;
        margin: 40px 20px;
    }
    .code-block {
        background-color: #1d3d4e;
        width: 600px;
        padding: 0px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
    }
    .title-block {
        display: flex;
        justify-content: space-between;
        background-color: #ffd700;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        padding: 10px 20px;
    }
    .title-text-block {
        display: flex;
        margin: 0px;
        padding: 0px;
    }
    .buttons-container {
        display: flex;
    }
    .button {
        width: 13px;
        height: 13px;
        border-radius: 50%;
    }
    .buttons-container div:nth-child(3) {
        background-color: #ff2400;
    }
    .buttons-container div:nth-child(2) {
        background-color: #0099cc;
    }
    .buttons-container div:nth-child(1) {
        background-color: #62d44d;
    }
    .buttons-container div:not(:last-child) {
        margin-right: 5px;
    }
    .block-title {
        padding-left: 20px;
        font-family: 'Arial';
        color: #717272;
    }
    .compatible-table {
        /*min-width: 660px;*/
        border: 1px solid #cdcdcd;
        border-collapse: collapse;
    }
    .device-types {
        border-left: 1px solid #cdcdcd;
        border-right: 1px solid #cdcdcd;
    }
    .first-row-cell {
        height: 80px;
    }
    .top-row-cell {
        border-bottom: 1px solid #cdcdcd;
    }
    .browser-container {
        padding: 10px 0px;
    }
  </style>
</head>
<body>
  <h4 class="block-title">Регулярные выражения - matchAll()</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - String.match()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const str = 'I love JavaScript';
      const regexp = /Java(Script)/g;

      console.log(str.match(/Java(Script)/));
      // ['JavaScript', 'Script', index: 7,
      //  input: 'I love JavaScript', groups: undefined]

      console.log(str.match(/Java(Script)/g));
      // ['JavaScript']
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - String.matchAll()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const str = "abc";
      const regexp = /[a-c]/g;
      const iterator = str.matchAll(regexp);

      for (result of iterator) {
        console.log(result);
      }

      // ["a", index: 0, input: "abc", groups: undefined]
      // ["b", index: 1, input: "abc", groups: undefined]
      // ["c", index: 2, input: "abc", groups: undefined]
    </code>
  </pre>
  <h4 class="block-title">Динамический импорт модулей</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - Dynamic import()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      // utils.js
      export const add = (a, b) => a + b

      // index.js
      (async () => {
        const module = await import('./utils.js');
        console.log(module.add(5, 4));
        // 9
      })()
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - Dynamic import()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      // utils.js
      const add = (a, b) => a + b

      export default add

      // index.js
      (async () => {
        const module = await import('./utils.js');
        console.log(module.default(5, 4));
        // 9
      })()
    </code>
  </pre>
  <h4 class="block-title">Большие числа - Big Int</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - BigInt()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let s = BigInt(98n)
      let b = BigInt(2n)

      console.log(s + b)
      // 100n
      console.log(b - s)
      // -96n
      console.log(typeof s)
      // 'bigint'
    </code>
  </pre>
  <h4 class="block-title">Promise.allSettled()</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - Promise.allSettled()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const urls = [
        'https://jsonplaceholder.typicode.com/users/1',
        'https://jsonplaceholder.typicode.com/todos/1'
      ]

      Promise.allSettled(urls.map(url => fetch(url))).then(results => {
        results.forEach(result => {
          if (result.status === "fulfilled") {
            console.log(result.value);
          }
          if (result.status === "rejected") {
            console.log(result.reason);
          }
        })
      })

      // Если status = fulfilled, то
      // { status: 'fulfilled', value: { объект результата } }
      //
      // Если status = rejected, то
      // { status: 'rejected', reason: { причина отклонения } }
    </code>
  </pre>
  <h4 class="block-title">Глобальный объект</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - globalThis</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const arr = [1, 2, 3];

      globalThis.Array.isArray(arr);

      // true
    </code>
  </pre>
  <h4 class="block-title">Оператор опциональной последовательности</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const response = {
        users: [
          {
            id: 1,
            name: 'Ann',
            age: 23,
          }
        ]
      }

      // get from lodash
      get(response, 'users[0].id', 0) // 1

      const userId = response && response.users &&
        response.users[0] && response.users[0].id;
      // 1

      const userId = response.users?.[0]?.id; // 1
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      // использование с вызовом функции
      let result = someInterface.customMethod?.();

      function doSomething(onContent, onError) {
        try {
         // ... делаем что-то с данными
        }
        catch (err) {
          onError?.(err.message);
          // не выбросит исключение, если onError равен undefined
        }
      }


    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const response = {
        users: [
          {
            id: 1,
            name: 'Ann',
            age: 23,
          }
        ]
      }

      // users будет удалён, если существует response
      delete response?.users;
    </code>
  </pre>
  <h4 class="block-title">Оператор нулевого слияния</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      a ?? b

      // если a не равняется ни null, ни undefined, то a
      // если a равно null или равно undefined, то b

      result = (a !== null && a !== undefined) ? a : b
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let height = 0;

      height || 100; // 100
      height ?? 100; // 0

      const middleName = object?.names?.middle ?? '(no middle name)';
      // '(no middle name)'

      null || undefined ?? "foo"; // вызывает SyntaxError
      (null || undefined) ?? "foo"; // вернёт "foo"
    </code>
  </pre>
  <h4 class="block-title">Module namespace exports</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - export * as namespace</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      import * as utils from "./utils.js";
      export { utils };

      // es2020
      export * as utils from "./utils.js";
    </code>
  </pre>
  <h4 class="block-title">ES2021</h4>
  <h4 class="block-title">Private class methods</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - private class methods</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      class Person {
        #age = 20;

        #displayName() {
          console.log('-> Name');
        }

        displayName() {
          console.log('-> Name: Andrey')
        }

        print() {
          this.#displayName()
        }

        printAge() {
          console.log('-> age: ', this.#age)
        }
      }

      const obj = new Person();
      obj.displayName();
      obj.print();
      obj.printAge();

      // -> Name: Andrey
      // -> Name
      // -> age: 20
    </code>
  </pre>
  <h4 class="block-title">String.replaceAll()</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - String.replaceAll()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let str = 'red blue green red';

      // до ES2021
      str.replace('red', 'black'); // 'black blue green red'
      str.replace(/red/g, 'black'); // 'black blue green black'

      // ES2021
      str.replaceAll('red', 'yellow'); // yellow blue green yellow
    </code>
  </pre>
  <h4 class="block-title">Финализаторы</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - FinalizationRegistry</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const registry = new FinalizationRegistry((value) => {
        console.log('-> print value: ', value);
      });

      (function () {
        const obj = {};

        registry.register(obj, "Object deleted");
      })();

      // -> print value:  Object deleted
    </code>
  </pre>
  <h4 class="block-title">Promise.any()</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - Promise.any()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      (async () => {
        try {
          await Promise.any([
            Promise.reject("Error 1"),
            Promise.reject("Error 2")
          ]);
        } catch (e) {
          console.log('-> print errors ', e.errors);
        }
      })()

      // -> print errors ['Error 1', 'Error 2']
    </code>
  </pre>
  <h4 class="block-title">Операторы логического присваивания</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - Оператор логического присваивания &&= </label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let a = 1;
      let b = 5;

      a &&= b; // 5

      // эквивалентно
      if (a) {
        a = b;
      }
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - Оператор логического присваивания ||= </label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let a;
      let b = 3;

      a ||= b; // 3

      // эквивалентно
      if (!a) {
        a = b;
      }
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - Оператор логического присваивания ??= </label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let a;
      let b = 8;

      a ??= b; // 8

      // эквивалентно
      if (a == null || a == undefined) {
        a = b;
      }
    </code>
  </pre>
  <h4 class="block-title">Подчёркивание - как новый числовой разделитель</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2021</b> - Подчёркивание - числовой разделитель</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const million = 1_000_000;
      console.log(million); // 1000000

      const max8bits = 0b1111_1111;
      console.log(max8bits); // 255

      const message = 0xa0_b0_c0;
      console.log(message); // 10531008
    </code>
  </pre>
  <h4 class="block-title">New classes members</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2022</b> - new classes members</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      class MyClass {
        instancePublicField = 1;
        static staticPublicField = 2;

        #instancePrivateField = 3;
        static #staticPrivateField = 4;

        #nonStaticPrivateMethod() {}
        get #nonStaticPrivateAccessor() {}
        set #nonStaticPrivateAccessor(value) {}

        static #staticPrivateMethod() {}
        static get #staticPrivateAccessor() {}
        static set #staticPrivateAccessor(value) {}

        static {
          // Static initialization block
        }

        static hasPrivateSlot(obj) {
          return #privateSlot in obj;
        }

        constructor(value) {
          this.name = value;
        }
      }
    </code>
  </pre>
  <h4 class="block-title">New classes members</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2022</b> - new classes members</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      class MyClass {
        instancePublicField = 1;
        static staticPublicField = 2;

        #instancePrivateField = 3;
        static #staticPrivateField = 4;

        #nonStaticPrivateMethod() {}
        get #nonStaticPrivateAccessor() {}
        set #nonStaticPrivateAccessor(value) {}

        static #staticPrivateMethod() {}
        static get #staticPrivateAccessor() {}
        static set #staticPrivateAccessor(value) {}

        static {
          // Static initialization block
        }

        static hasPrivateSlot(obj) {
          return #privateSlot in obj;
        }

        constructor(value) {
          this.name = value;
        }
      }
    </code>
  </pre>
  <h4 class="block-title">RegExp match indices</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2022</b> - new regexp flag /d</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      /(a+)(b+)/d.exec('aaaabb')

      // 0: "aaaabb"
      // 1: "aaaa"
      // 2: "bb"
      // groups: undefined
      // index: 0
      // indices: Array(3)
      //    0: [0, 6]
      //    1: [0, 4]
      //    2: [4, 6]
      // groups: undefined
      // input: "aaaabb"
    </code>
  </pre>
  <h4 class="block-title">RegExp match indices</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2022</b> - new regexp flag /d</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      /(?< as >a+)(?< bs >b+)/d.exec('aaaabb')

      // 0: "aaaabb"
      // 1: "aaaa"
      // 2: "bb"
      // groups:
      //   as: "aaaa"
      //   bs: "bb"
      // index: 0
      // indices: Array(3)
      //   0: [0, 6]
      //   1: [0, 4]
      //   2: [4, 6]
      //   groups:
      //     as: [0, 4]
      //     bs: [4, 6]
      // length: 3
      // input: "aaaabb"
    </code>
  </pre>
  <h4 class="block-title">New function .at()</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2022</b> - at()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      // Array
      [3, 4, 5, 8, 0, 7].at(3) // 8

      [3, 4, 5, 8, 0, 7].at(-2) // 0

      // String
      'str'.at(-1) // r

      'str'.at(0) // s
    </code>
  </pre>
  <h4 class="block-title">Браузерная совместимость</h4>
  <table class="compatible-table">
    <tr>
      <th class="first-row-cell" style="width: 60px;"><i class="fa-brands fa-js"></i></th>
      <th class="first-row-cell device-types top-row-cell" style="width: 300px;" colspan="4"><i class="fa-solid fa-desktop"></i></th>
      <th class="first-row-cell device-types top-row-cell" colspan="3"><i class="fa-solid fa-mobile-screen-button"></i></th>
      <th class="first-row-cell top-row-cell"><i class="fa-solid fa-bars"></i></th>
    </tr>
    <tr>
      <th style="width: 60px;"></th>
      <th class="device-types browser-container" style="width: 75px;"><i class="fa-brands fa-chrome"></i></th>
      <th class="device-types browser-container" style="width: 75px;"><i class="fa-brands fa-edge"></i></th>
      <th class="browser-container" style="width: 75px;"><i class="fa-brands fa-firefox"></i></th>
      <th class="device-types browser-container" style="width: 75px;"><i class="fa-brands fa-safari"></i></th>
      <th class="browser-container" style="width: 75px;"><i class="fa-brands fa-chrome"></i></th>
      <th class="device-types browser-container" style="width: 75px;"><i class="fa-brands fa-firefox"></i></th>
      <th class="browser-container" style="width: 75px;"><i class="fa-brands fa-safari"></i></th>
      <th class="device-types browser-container" style="width: 75px;"><i class="fa-brands fa-node"></i></th>
    </tr>
  </table>

</body>
</html>
