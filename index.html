<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Attestation</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/styles/shades-of-purple.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.8/highlight.min.js"></script>
  <script src="index.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>
  <style>
    .container {
        display: flex;
        flex-direction: column;
        width: 600px;
        margin: 40px 20px;
    }
    .code-block {
        background-color: #1d3d4e;
        width: 600px;
        padding: 0px;
        border-bottom-left-radius: 5px;
        border-bottom-right-radius: 5px;
    }
    .title-block {
        display: flex;
        justify-content: space-between;
        background-color: #ffd700;
        border-top-left-radius: 5px;
        border-top-right-radius: 5px;
        padding: 10px 20px;
    }
    .title-text-block {
        display: flex;
        margin: 0px;
        padding: 0px;
    }
    .buttons-container {
        display: flex;
    }
    .button {
        width: 13px;
        height: 13px;
        border-radius: 50%;
    }
    .buttons-container div:nth-child(3) {
        background-color: #ff2400;
    }
    .buttons-container div:nth-child(2) {
        background-color: #0099cc;
    }
    .buttons-container div:nth-child(1) {
        background-color: #62d44d;
    }
    .buttons-container div:not(:last-child) {
        margin-right: 5px;
    }
    .block-title {
        padding-left: 20px;
        font-family: 'Arial';
        color: #717272;
    }
  </style>
</head>
<body>
  <h4 class="block-title">Регулярные выражения - matchAll()</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - String.match()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const str = 'I love JavaScript';
      const regexp = /Java(Script)/g;

      console.log(str.match(/Java(Script)/));
      // ['JavaScript', 'Script', index: 7,
      //  input: 'I love JavaScript', groups: undefined]

      console.log(str.match(/Java(Script)/g));
      // ['JavaScript']
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - String.matchAll()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const str = "abc";
      const regexp = /[a-c]/g;
      const iterator = str.matchAll(regexp);

      for (result of iterator) {
        console.log(result);
      }

      // ["a", index: 0, input: "abc", groups: undefined]
      // ["b", index: 1, input: "abc", groups: undefined]
      // ["c", index: 2, input: "abc", groups: undefined]
    </code>
  </pre>
  <h4 class="block-title">Динамический импорт модулей</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - Dynamic import()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      // utils.js
      export const add = (a, b) => a + b

      // index.js
      (async () => {
        const module = await import('./utils.js');
        console.log(module.add(5, 4));
        // 9
      })()
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - Dynamic import()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      // utils.js
      const add = (a, b) => a + b

      export default add

      // index.js
      (async () => {
        const module = await import('./utils.js');
        console.log(module.default(5, 4));
        // 9
      })()
    </code>
  </pre>
  <h4 class="block-title">Большие числа - Big Int</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - BigInt()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let s = BigInt(98n)
      let b = BigInt(2n)

      console.log(s + b)
      // 100n
      console.log(b - s)
      // -96n
      console.log(typeof s)
      // 'bigint'
    </code>
  </pre>
  <h4 class="block-title">Promise.allSettled()</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - Promise.allSettled()</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const urls = [
        'https://jsonplaceholder.typicode.com/users/1',
        'https://jsonplaceholder.typicode.com/todos/1'
      ]

      Promise.allSettled(urls.map(url => fetch(url))).then(results => {
        results.forEach(result => {
          if (result.status === "fulfilled") {
            console.log(result.value);
          }
          if (result.status === "rejected") {
            console.log(result.reason);
          }
        })
      })

      // Если status = fulfilled, то
      // { status: 'fulfilled', value: { объект результата } }
      //
      // Если status = rejected, то
      // { status: 'rejected', reason: { причина отклонения } }
    </code>
  </pre>
  <h4 class="block-title">Глобальный объект</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - globalThis</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const arr = [1, 2, 3];

      globalThis.Array.isArray(arr);

      // true
    </code>
  </pre>
  <h4 class="block-title">Оператор опциональной последовательности</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const response = {
        users: [
          {
            id: 1,
            name: 'Ann',
            age: 23,
          }
        ]
      }

      // get from lodash
      get(response, 'users[0].id', 0) // 1

      const userId = response && response.users &&
        response.users[0] && response.users[0].id;
      // 1

      const userId = response.users?.[0]?.id; // 1
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      // использование с вызовом функции
      let result = someInterface.customMethod?.();

      function doSomething(onContent, onError) {
        try {
         // ... делаем что-то с данными
        }
        catch (err) {
          onError?.(err.message);
          // не выбросит исключение, если onError равен undefined
        }
      }


    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      const response = {
        users: [
          {
            id: 1,
            name: 'Ann',
            age: 23,
          }
        ]
      }

      // users будет удалён, если существует response
      delete response?.users;
    </code>
  </pre>
  <h4 class="block-title">Оператор нулевого слияния</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      a ?? b

      // если a не равняется ни null, ни undefined, то a
      // если a равно null или равно undefined, то b

      result = (a !== null && a !== undefined) ? a : b
    </code>
  </pre>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - optional chaining operator</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      let height = 0;

      height || 100; // 100
      height ?? 100; // 0

      const middleName = object?.names?.middle ?? '(no middle name)';
      // '(no middle name)'

      null || undefined ?? "foo"; // вызывает SyntaxError
      (null || undefined) ?? "foo"; // вернёт "foo"
    </code>
  </pre>
  <h4 class="block-title">Module namespace exports</h4>
  <pre class="container">
    <div class="title-block">
      <div class="title-text-block">
        <label><b>ES2020</b> - export * as namespace</label>
      </div>
      <div class="buttons-container">
        <div class="button"></div>
        <div class="button"></div>
        <div class="button"></div>
      </div>
    </div>
    <code class="language-js code-block">
      import * as utils from "./utils.js";
      export { utils };

      // es2020
      export * as utils from "./utils.js";
    </code>
  </pre>
</body>
</html>
